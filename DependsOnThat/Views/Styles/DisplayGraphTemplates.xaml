<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
					xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
					xmlns:graphControls="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
					xmlns:graphBehaviours="clr-namespace:GraphSharp.AttachedBehaviours;assembly=GraphSharp.Controls"
					xmlns:graphConverters="clr-namespace:GraphSharp.Converters;assembly=GraphSharp.Controls"
					xmlns:local="clr-namespace:DependsOnThat.Views"
					xmlns:ext="clr-namespace:DependsOnThat.Views.Behaviours"
					xmlns:converters="clr-namespace:DependsOnThat.Presentation.Converters"
					xmlns:graphdisplay="clr-namespace:DependsOnThat.Graph.Display"
					mc:Ignorable="d">
	<ResourceDictionary.MergedDictionaries>
		<ResourceDictionary Source="CheckBox.xaml" />
	</ResourceDictionary.MergedDictionaries>

	<!--TODO: should use editor colour scheme https://stackoverflow.com/questions/18913208/colors-in-visual-studio-extension-->
	<converters:DisplayNodeBackgroundConverter x:Key="DisplayNodeBackgroundConverter"
											   DefaultBrush="LightGray" />
	<converters:DisplayEdgeStrokeDashArrayConverter x:Key="DisplayEdgeStrokeDashArrayConverter"
													MultiStrokeDashArray="4 2" />
	<converters:DisplayEdgeTooltipConverter x:Key="DisplayEdgeTooltipConverter" />
	<converters:DisplayNodeGitIndicatorVisibilityConverter x:Key="DisplayNodeGitIndicatorVisibilityConverter" />
	<graphConverters:EdgeRouteToPathConverter x:Key="RouteToPathConverter" />
	<converters:DebugConverter x:Key="DebugConverter" />
	<converters:GitStatusTooltipConverter x:Key="GitStatusTooltipConverter" />

	<Style TargetType="{x:Type graphControls:VertexControl}">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type graphControls:VertexControl}">
					<Border BorderBrush="{TemplateBinding BorderBrush}"
							BorderThickness="{TemplateBinding BorderThickness}"
							Background="{TemplateBinding Vertex, Converter={StaticResource DisplayNodeBackgroundConverter}}"
							ToolTip="{TemplateBinding ToolTip}"
							CornerRadius="5"
							Padding="2,0,2,0">
						<StackPanel Orientation="Horizontal"
									DataContext="{TemplateBinding Vertex}">
							<TextBlock Text="{Binding DisplayString}"
									   FontSize="16" />
							<CheckBox x:Name="PinCheckBox"
									  Style="{StaticResource PinCheckBoxStyle}"
									  VerticalAlignment="Top"
									  IsChecked="{Binding IsPinned}"
									  ext:ToggleButtonExtensions.ToggleCommand="{Binding ParentContext.TogglePinnedCommand}"
									  ext:ToggleButtonExtensions.ToggleCommandParameter="{Binding}" />
							<Grid Margin="0,-8,-5,0"
								  HorizontalAlignment="Right"
								  VerticalAlignment="Top"
								  ToolTip="{Binding GitStatus, Converter={StaticResource GitStatusTooltipConverter}}">
								<Grid.Visibility>
									<MultiBinding Converter="{StaticResource DisplayNodeGitIndicatorVisibilityConverter}">
										<Binding Path="GitStatus" />
										<Binding Path="ParentContext.DisplayMode" />
									</MultiBinding>
								</Grid.Visibility>
								<Ellipse Width="20"
										 Height="20"
										 Fill="White"
										 StrokeThickness="1"
										 Stroke="Black" />
								<Path HorizontalAlignment="Center"
									  VerticalAlignment="Center"
									  Fill="#f05133"
									  Data="M 12.695312 5.925781 L 7.046875 0.253906 C 6.722656 -0.0703125 6.195312 -0.0703125 5.871094 0.253906 L 4.695312 1.433594 L 6.183594 2.925781 C 6.53125 2.808594 6.925781 2.886719 7.203125 3.164062 C 7.480469 3.445312 7.558594 3.84375 7.4375 4.195312 L 8.871094 5.632812 C 9.21875 5.511719 9.617188 5.589844 9.894531 5.871094 C 10.28125 6.257812 10.28125 6.886719 9.894531 7.277344 C 9.507812 7.667969 8.878906 7.667969 8.492188 7.277344 C 8.203125 6.984375 8.128906 6.554688 8.277344 6.195312 L 6.941406 4.851562 L 6.941406 8.386719 C 7.035156 8.433594 7.125 8.496094 7.203125 8.574219 C 7.589844 8.960938 7.589844 9.59375 7.203125 9.980469 C 6.816406 10.371094 6.1875 10.371094 5.800781 9.980469 C 5.414062 9.59375 5.414062 8.960938 5.800781 8.574219 C 5.894531 8.476562 6.007812 8.40625 6.125 8.355469 L 6.125 4.789062 C 6.007812 4.742188 5.894531 4.667969 5.800781 4.574219 C 5.507812 4.277344 5.4375 3.847656 5.585938 3.484375 L 4.121094 2.011719 L 0.246094 5.902344 C -0.078125 6.226562 -0.078125 6.757812 0.246094 7.082031 L 5.894531 12.753906 C 6.222656 13.082031 6.75 13.082031 7.074219 12.753906 L 12.695312 7.109375 C 13.019531 6.785156 13.019531 6.253906 12.695312 5.925781 " />
							</Grid>
						</StackPanel>
					</Border>
					<ControlTemplate.Triggers>
						<Trigger Property="IsMouseOver"
								 Value="True">
							<Setter TargetName="PinCheckBox"
									Property="ext:PinCheckBoxBehaviour.ForceShow"
									Value="True" />
						</Trigger>
						<Trigger Property="graphControls:GraphElementBehaviour.IsHighlighted"
								 Value="True">
							<Setter TargetName="PinCheckBox"
									Property="ext:PinCheckBoxBehaviour.ForceShow"
									Value="True" />
						</Trigger>
					</ControlTemplate.Triggers>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
		<Setter Property="graphControls:GraphElementBehaviour.HighlightTrigger"
				Value="False" />
		<Setter Property="graphBehaviours:DragBehaviour.IsDragEnabled"
				Value="True" />
		<Setter Property="graphBehaviours:DragBehaviour.X"
				Value="{Binding RelativeSource={RelativeSource Self},Path=(graphControls:GraphCanvas.X),Mode=TwoWay}" />
		<Setter Property="graphBehaviours:DragBehaviour.Y"
				Value="{Binding RelativeSource={RelativeSource Self},Path=(graphControls:GraphCanvas.Y),Mode=TwoWay}" />
		<Setter Property="BorderThickness"
				Value="1" />
		<Setter Property="BorderBrush"
				Value="Silver" />
		<Style.Triggers>
			<Trigger Property="graphControls:GraphElementBehaviour.IsHighlighted"
					 Value="True">
				<Setter Property="BorderBrush"
						Value="Black" />
				<Setter Property="BorderThickness"
						Value="2" />
			</Trigger>
			<Trigger Property="graphControls:GraphElementBehaviour.IsSemiHighlighted"
					 Value="True">
				<Setter Property="BorderBrush"
						Value="Black" />
				<Setter Property="BorderThickness"
						Value="1" />
			</Trigger>
		</Style.Triggers>
	</Style>

	<Style TargetType="{x:Type graphControls:EdgeControl}">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type graphControls:EdgeControl}">
					<Canvas>
						<Path Stroke="{TemplateBinding Foreground}"
							  StrokeThickness="{TemplateBinding StrokeThickness}"
							  StrokeDashArray="{Binding Converter={StaticResource DisplayEdgeStrokeDashArrayConverter}}"
							  Fill="{TemplateBinding Fill}"
							  MinWidth="1"
							  MinHeight="1"
							  ToolTip="{Binding Converter={StaticResource DisplayEdgeTooltipConverter}}"
							  x:Name="edgePath">
							<Path.Data>
								<PathGeometry>
									<PathGeometry.Figures>
										<MultiBinding Converter="{StaticResource RouteToPathConverter}">
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Source.(graphControls:GraphCanvas.X)" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Source.(graphControls:GraphCanvas.Y)" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Source.ActualWidth" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Source.ActualHeight" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Target.(graphControls:GraphCanvas.X)" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Target.(graphControls:GraphCanvas.Y)" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Target.ActualWidth" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="Target.ActualHeight" />
											<Binding RelativeSource="{RelativeSource TemplatedParent}"
													 Path="RoutePoints" />
										</MultiBinding>
									</PathGeometry.Figures>
								</PathGeometry>
							</Path.Data>
						</Path>
					</Canvas>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
		<Setter Property="graphControls:GraphElementBehaviour.HighlightTrigger"
				Value="False" />
		<Setter Property="MinWidth"
				Value="1" />
		<Setter Property="MinHeight"
				Value="1" />
		<Setter Property="Background"
				Value="Red" />
		<Setter Property="Foreground"
				Value="Silver" />
		<Setter Property="Opacity"
				Value="0.5" />
		<Style.Triggers>
			<Trigger Property="graphControls:GraphElementBehaviour.IsHighlighted"
					 Value="True">
				<Setter Property="Foreground"
						Value="Black" />
			</Trigger>
			<Trigger Property="graphControls:GraphElementBehaviour.IsSemiHighlighted"
					 Value="True">
				<Setter Property="Foreground"
						Value="Black" />
			</Trigger>
		</Style.Triggers>
	</Style>
</ResourceDictionary>
